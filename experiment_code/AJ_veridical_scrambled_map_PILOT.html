<!DOCTYPE html>
<html>
  <head>
    <script src="jspsych/jspsych.js"></script>
    <script src="jspsych/plugins/jspsych-video-keyboard-response.js"></script>
    <script src="jspsych/plugins/jspsych-video-slider-response.js"></script>
    <script src="jspsych/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych/plugins/jspsych-html-slider-response.js"></script>
    <script src="jspsych/plugins/jspsych-survey-likert.js"></script>
    <script src="jspsych/plugins/jspsych-instructions.js"></script>
    <script src="jspsych/plugins/jspsych-survey-text.js"></script>
    <script src="jspsych/plugins/jspsych-call-function.js"></script>
    <script src="jspsych/plugins/jspsych-survey-multi-select.js"></script>
    <link rel="stylesheet" href="jspsych/css/jspsych.css">
  </head>
  <body>

<!--     <div id="videoDiv">
     <video id="video" src="http://127.0.0.1:4001/videos/<?php $videoFileName?>" width="70%" controls>
    </div>
 -->
  </body>
  <script>


// Initiate timeline 

var timeline = [];

// create random subject ID with 8 alphanumeric characters

var rand_subject_id = jsPsych.randomization.randomID(8);

// add the ID to the data for all trials

jsPsych.data.addProperties({ID: rand_subject_id});

// questions for experimenter

var experimenter = {
  type: 'survey-multi-select',
  questions: [
    {
      prompt: '<b>'+"EXPERIMENTER FILL OUT"+'</b>'+'</b>'+'<br/>'+"I have done the following:", 
      options: ["Confirmed subject's identity", 
      "Confirmed normal or corrected-to-normal vision", 
      "Obtained consent (signature and date)",
      "Checked the test room lighting", 
      "Checked computer screen lighting", 
      "Checked distance from screen to chin rest (30cm)",
      "Cleaned and adjusted chin rest",
      "Made the experiment full screen",
      "Encouraged subject to silence phone, put away distractors, etc."],  
      //horizontal: true,
      required: true,
      name: 'Experimenter'
    }, 
  ], 
};

// Set up task instructions

var trial0 = {
    type: 'instructions',
    pages: [
    'Thank you for agreeing to participate in our experiment!'+'</br>'+
    'Feel free to begin whenever you are ready.'
    ],
    show_clickable_nav: true,
    button_label_next: "Begin"
};

var trial1a = {
    type: 'instructions',
    pages: [
    "In this experiment, you will see attention hotspots on the screen. These hotspots will show where another agent paid attention as they looked at an image.",
    "To understand what this means, let's look at an example.",
    "Here, when looking at this image, the agent first paid attention to the bananas, as shown by the light attention hotspot."+'<br>'+ 
    '<img src="/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/example_image.jpg" height="500"></img>'
    ],
    show_clickable_nav: true
};

var trial1b = {
    type: 'instructions',
    pages: [
    //'And here is the full sequence showing where the agent attended over time'
    "Then, the agent proceeded to shift their attention to other parts of the image over time."
    ],
    show_clickable_nav: true,
    button_label_next: "View Attention Sequence"
}

var trial2 = {
  type: 'video-keyboard-response',
  sources:['/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/example.mp4'],
  choices: "NO_KEYS",
  trial_ends_after_video: true,
  height:500
};

var trial3 = {
    type: 'instructions',
    pages: [
    'The hotspots may not always be neatly drawn. There might be some fuzzy or confusing parts.',
    'Your job is just to try and get a basic sense of how the agent moves their attention over time.',
    'In the experiment, though, you will not get to see the image the agent was attending.'],
    show_clickable_nav: true,
    button_label_next: "Next"
};

var trial3a = {
    type: 'instructions',
    pages: [
    "Instead, you will just see where the agent's attention moved over time, displayed on a dark background."],
    show_clickable_nav: true,
    button_label_next: "View Attention Sequence"
};

var trial3b = {
  type: 'video-keyboard-response',
  sources:['/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/example_map.mp4'],
  choices: "NO_KEYS",
  trial_ends_after_video: true,
  height:500
};


var trial3c = {
  type:'instructions',
  pages: [
    "Here's how the experiment will work...",
    '<p>Sometimes, you will see '+'<span style="color:Black;">'+'<u>'+"Agent A's"+'</u>'+'</span>'+' attention moving around the screen.'+'</p>'+'<p>'+'Other times, you will see '+'<span style="color:Black;">'+'<u>'+"Agent B's"+'</u>'+'</span>'+' attention moving around the screen.</p>',
    'Pay close attention to the ways' +'<span style="color:Black;">'+' Agent A'+'</span>'+' and ' +'<span style="color:Black;">'+'Agent B '+'</span>'+'move their attention.'+'<br/><br>'+'After each set of videos, you will decide which agent was a real person attending an image and which was fake.'
    ],
    show_clickable_nav: true
};

var trial3d = {
  type:'instructions',
  pages: [
      'The experiment is split up into seven chunks, with breaks in between.'+'</br></br>'+'You can begin the first chunk whenever you are ready!'
      ],
  show_clickable_nav:true,
  button_label_next: "Begin"
}

// Push experimenter questions and task instructions to timeline 
timeline.push(experimenter)
timeline.push(trial0)
timeline.push(trial1a)
timeline.push(trial1b)
timeline.push(trial2)
timeline.push(trial3)
timeline.push(trial3a)
timeline.push(trial3b)
timeline.push(trial3c)
timeline.push(trial3d)

// Set up break trial instructions

var break1 = {
    type: 'instructions',
    pages: [
    "Great job! You've completed the first block of the experiment.",
    "Feel free to take a break and relax.",
    "Whenever you're ready to continue, click 'Next'."
    ],
    show_clickable_nav: true
};

var break2 = {
    type: 'instructions',
    pages: [
    "You've just completed the second block. Five more to go!",
    "Feel free to take a break and relax.",
    "Whenever you're ready, you can hit 'Next' to start the next block"
    ],
    show_clickable_nav: true
};

var break3 = {
    type: 'instructions',
    pages: [
    "You've just completed the third block. Four more to go!",
    "Feel free to take a break and relax.",
    "Whenever you're ready, you can hit 'Next' to start the next block"
    ],
    show_clickable_nav: true
};

var break4 = {
    type: 'instructions',
    pages: [
    "You've just completed the fourth block. Three more to go!",
    "Feel free to take a break and relax.",
    "Whenever you're ready, you can hit 'Next' to start the next block"
    ],
    show_clickable_nav: true
};

var break5 = {
    type: 'instructions',
    pages: [
    "You've just completed the fifth block. Two more to go!",
    "Feel free to take a break and relax.",
    "Whenever you're ready, you can hit 'Next' to start the next block"
    ],
    show_clickable_nav: true
};

var break6 = {
    type: 'instructions',
    pages: [
    "You've just completed the sixth block. One more to go!",
    "Feel free to take a break and relax.",
    "Whenever you're ready, you can hit 'Next' to start the next block"
    ],
    show_clickable_nav: true
};

var verify = {
    type: 'instructions',
    pages: [
    "You're about to begin the next block.",
    "Remember, for each set of videos, you'll be judging which agent is the real human.",
    "Click 'Next' to begin!"
    ],
    show_clickable_nav: true
}

var breaks=[break1, break2, break3, break4, break5, break6]


// Create video stimuli 

//function for getting a random integer in javascript
function getRndInteger(min, max) {
  return Math.floor(Math.random() * (max - min + 1) ) + min;
}

// make an array containing all of the veridical videos 
let veridical_videos = [
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_107909.bmppp94_L1V1_freeview_veridical_mapOnly.mp4',    
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592352.bmppp82_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_107964.bmppp86_L1V1_freeview_veridical_mapOnly.mp4',    
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592362.bmppp53_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159325.bmppp99_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592367.bmppp79_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159329.bmppp99_L1V1_freeview_veridical_mapOnly.mp4', 
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592394.bmppp86_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159392.bmppp95_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592499.bmppp152_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159397.bmppp86_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592656.bmppp95_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159434.bmppp70_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592747.bmppp62_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159609.bmppp79_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592890.bmppp95_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159724.bmppp79_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1593006.bmppp94_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159813.bmppp54_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_285715.bmppp53_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159847.bmppp95_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_285859.bmppp53_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159874.bmppp152_L1V1_freeview_veridical_mapOnly.mp4',  
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_498153.bmppp86_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159882.bmppp96_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_498155.bmppp90_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159889.bmppp61_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_498221.bmppp88_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159897.bmppp53_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_498253.bmppp54_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159904.bmppp88_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_498281.bmppp90_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1160049.bmppp90_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_498286.bmppp94_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1160093.bmppp152_L1V1_freeview_veridical_mapOnly.mp4',  
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_498372.bmppp82_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1160127.bmppp62_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_498388.bmppp62_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1160155.bmppp67_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_498396.bmppp79_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1160168.bmppp96_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_61514.bmppp67_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1160180.bmppp61_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_61574.bmppp90_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1160227.bmppp67_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713003.bmppp82_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_150374.bmppp96_L1V1_freeview_veridical_mapOnly.mp4',    
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713017.bmppp53_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_150458.bmppp82_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713028.bmppp70_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1591805.bmppp70_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713135.bmppp99_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1591859.bmppp61_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713142.bmppp79_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1591954.bmppp54_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713146.bmppp61_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1591961.bmppp88_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713328.bmppp62_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592033.bmppp94_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713512.bmppp54_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592038.bmppp94_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713513.bmppp96_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592044.bmppp152_L1V1_freeview_veridical_mapOnly.mp4',  
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713681.bmppp88_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592083.bmppp99_L1V1_freeview_veridical_mapOnly.mp4',  
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713730.bmppp82_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592193.bmppp70_L1V1_freeview_veridical_mapOnly.mp4',  
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713749.bmppp88_L1V1_freeview_veridical_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592254.bmppp95_L1V1_freeview_veridical_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713779.bmppp67_L1V1_freeview_veridical_mapOnly.mp4',
]


// make a corresponding array containing all of the scrambled videos

let scrambled_videos = [
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_107909.bmppp94_L1V1_freeview_scrambled_mapOnly.mp4',    
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592352.bmppp82_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_107964.bmppp86_L1V1_freeview_scrambled_mapOnly.mp4',    
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592362.bmppp53_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159325.bmppp99_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592367.bmppp79_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159329.bmppp99_L1V1_freeview_scrambled_mapOnly.mp4', 
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592394.bmppp86_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159392.bmppp95_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592499.bmppp152_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159397.bmppp86_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592656.bmppp95_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159434.bmppp70_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592747.bmppp62_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159609.bmppp79_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592890.bmppp95_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159724.bmppp79_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1593006.bmppp94_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159813.bmppp54_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_285715.bmppp53_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159847.bmppp95_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_285859.bmppp53_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159874.bmppp152_L1V1_freeview_scrambled_mapOnly.mp4',  
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_498153.bmppp86_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159882.bmppp96_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_498155.bmppp90_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159889.bmppp61_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_498221.bmppp88_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159897.bmppp53_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_498253.bmppp54_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1159904.bmppp88_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_498281.bmppp90_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1160049.bmppp90_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_498286.bmppp94_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1160093.bmppp152_L1V1_freeview_scrambled_mapOnly.mp4',  
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_498372.bmppp82_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1160127.bmppp62_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_498388.bmppp62_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1160155.bmppp67_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_498396.bmppp79_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1160168.bmppp96_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_61514.bmppp67_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1160180.bmppp61_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_61574.bmppp90_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1160227.bmppp67_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713003.bmppp82_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_150374.bmppp96_L1V1_freeview_scrambled_mapOnly.mp4',    
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713017.bmppp53_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_150458.bmppp82_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713028.bmppp70_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1591805.bmppp70_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713135.bmppp99_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1591859.bmppp61_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713142.bmppp79_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1591954.bmppp54_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713146.bmppp61_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1591961.bmppp88_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713328.bmppp62_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592033.bmppp94_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713512.bmppp54_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592038.bmppp94_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713513.bmppp96_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592044.bmppp152_L1V1_freeview_scrambled_mapOnly.mp4',  
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713681.bmppp88_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592083.bmppp99_L1V1_freeview_scrambled_mapOnly.mp4',  
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713730.bmppp82_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592193.bmppp70_L1V1_freeview_scrambled_mapOnly.mp4',  
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713749.bmppp88_L1V1_freeview_scrambled_mapOnly.mp4',
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_1592254.bmppp95_L1V1_freeview_scrambled_mapOnly.mp4',   
'/Users/kirstenziman/Desktop/Desktop/DIDEC_entire_corpus/analysis_3/STIM_SET_2/0_713779.bmppp67_L1V1_freeview_scrambled_mapOnly.mp4',
]

// array of both possible prompts, viewers A and B
var viewer_list = ['<span style="color:Black; font-size:50px;">'+'Agent A','<span style="color:Black; font-size:50px;">'+'Agent B']

// loop through the total number of trials you want in the experiment

// UNCOMMENT THE LINE BELOW TO USE ALL STIMULI
var num_trials = veridical_videos.length

// var num_trials = 5

// start block tracker to track what block we're in
var block = 0

// trial type to hide cursor while videos display
var cursor_off = {
    type: 'call-function',
    func: function() {
        document.body.style.cursor= "none";
    }
}

// trial type to turn cursor back on after videos display
var cursor_on = {
    type: 'call-function',
    func: function() {
        document.body.style.cursor= "auto";
    }
}

// (in our case, this is the same as the total number of videos)
for(i=0; i<num_trials; i++){

  index = getRndInteger(0,veridical_videos.length-1)

  // make stim_list
  stim_list   = [veridical_videos[index],scrambled_videos[index]]

  // make condition_list
  cond_list   = ['veridical','scrambled']

  // get rid of these from the full array (no repeats)
  veridical_videos.splice(index,1); scrambled_videos.splice(index,1)

  // select at random which item to show first
  first_stim    = getRndInteger(0,1)
  second_stim   = Math.abs(first_stim-1)

  // based on first_stim, determine which judgement is correct
  if (first_stim==0){
    corr = 0
  } else {
    corr = 1
  }

  // Make confidence judgement trial
  var confidence = {
      type: 'survey-likert',
      questions: [
        {
          prompt: "How confident are you in your answer?",
          name: "confidence", 
          labels: [
            "1"+'<br/>'+"Very"+ '<br/>'+"unsure", 
            "2"+'<br/>'+"A little "+'<br/>'+ "unsure",  
            "3"+'<br/>'+"A little confident", 
            "4"+'<br/>'+"Very confident"
          ],required: true
          }
        ],
      };

  // select at random which is first, viewer A or viewer B  
  // first_viewer  = getRndInteger(0,1)
  // second_viewer = Math.abs(first_viewer-1)

  var viewer1 = {
      type: 'html-keyboard-response',
      stimulus: [viewer_list[0]],
      stimulus_duration: 3000,
      trial_duration: 3000,
  };

  var video1 = {
      type: 'video-keyboard-response',
      sources: [stim_list[first_stim]],
      prompt: [viewer_list[0]],
      choices: "NO_KEYS",
      trial_ends_after_video: true,
      height:500,
      condition: [cond_list[first_stim]],
      data: {
        agent:     'Agent A',
        condition: cond_list[first_stim],
        image:     stim_list[first_stim]
      }
  };

  var viewer2 = {
      type: 'html-keyboard-response',
      stimulus: [viewer_list[1]],
      stimulus_duration: 3000,
      trial_duration: 3000,
      //choices: "NO_KEYS"
  };

  var video2 = {
      type: 'video-keyboard-response',
      sources: [stim_list[second_stim]],
      prompt: [viewer_list[1]],
      choices: "NO_KEYS",
      trial_ends_after_video: true,
      height:500,
      condition:[cond_list[second_stim]],
      data: {
        agent:     'Agent B',
        condition: cond_list[second_stim],
        image:     stim_list[second_stim]
      }
  };

  var judge = {
    type: 'survey-likert',
    questions: 
    [
    {prompt: "Which one was the real human?", name:"judgement", labels: ['<span style="color:Black; font-size:20px;">'+'Agent A'+'</span>', '<span style="color:Black; font-size:20px;">'+'Agent B'+'</span>'],required: true}
    ],

    data: {
    correct_answer: corr
    }};

  timeline.push(cursor_off)
  timeline.push(viewer1)
  timeline.push(video1)
  timeline.push(viewer2)
  timeline.push(video2)
  timeline.push(cursor_on)
  timeline.push(judge)
  timeline.push(confidence)

  // if length(i)/16 has no remainder
  if (((i+1)%10==0)&&(i!=69)){
    timeline.push(breaks[block])
    timeline.push(verify)
    block+=1
  }
  }

// Create ending trials

var closing0 = {
    type: 'instructions',
    pages: [
    "Awesome job! You have finished the last block." +'</br></br>'+'We just have three final questions for you.'
    ],
    show_clickable_nav: true
};

var closing01a = {
      type: 'survey-likert',
      questions: [
        {
          prompt:'<b>'+"For attention I judged as human:"+'</b>'+'<br/>'+"When I saw the attention hotspots, I felt that another conscious agent was looking at the image.",
          name: "post-1", 
          labels: [
            "1"+'<br/>'+"Never /"+'<br/>'+"Almost never", 
            "2"+'<br/>'+"Sometimes",  
            "3"+'<br/>'+"Often", 
            "4"+'<br/>'+"Always /"+'<br/>'+"Almost always"
          ],required: true
          }
        ],
      }

var closing01b = {
      type: 'survey-likert',
      questions: [
        {
          prompt: '<b>'+"For attention I judged as fake:"+'</b>'+'<br/>'+"When I saw the attention hotspots, I felt that another conscious agent was looking at the image.",
          name: "post-1", 
          labels: [
            "1"+'<br/>'+"Never /"+'<br/>'+"Almost never", 
            "2"+'<br/>'+"Sometimes",  
            "3"+'<br/>'+"Often", 
            "4"+'<br/>'+"Always /"+'<br/>'+"Almost always"
          ],required: true
          }
        ],
      }

var closing02a = {
      type: 'survey-likert',
      questions: [
        {
          prompt: '<b>'+"For attention I judged as human:"+'</b>'+'<br/>'+"When I saw the attention hotspots, I couldn’t help but feel there was another conscious agent looking at the image, it was automatic. ",
          name: "post-2", 
          labels: [
            "1"+'<br/>'+"Never /"+'<br/>'+"Almost never", 
            "2"+'<br/>'+"Sometimes",  
            "3"+'<br/>'+"Often", 
            "4"+'<br/>'+"Always /"+'<br/>'+"Almost always"
          ],required: true
          }
        ],
      }

var closing02b = {
      type: 'survey-likert',
      questions: [
        {
          prompt: '<b>'+"For attention I judged as fake:"+'</b>'+'<br/>'+"When I saw the attention hotspots, I couldn’t help but feel there was another conscious agent looking at the image, it was automatic. ",
          name: "post-2", 
          labels: [
            "1"+'<br/>'+"Never /"+'<br/>'+"Almost never", 
            "2"+'<br/>'+"Sometimes",  
            "3"+'<br/>'+"Often", 
            "4"+'<br/>'+"Always /"+'<br/>'+"Almost always"
          ],required: true
          }
        ],
      }

var closing03a = {
      type: 'survey-likert',
      questions: [
        {
          prompt: '<b>'+"For attention I judged as human:"+'</b>'+'<br/>'+"It felt like the other agent was moving its attention in the same ways that I would.",
          name: "post-3", 
          labels: [
            "1"+'<br/>'+"Never /"+'<br/>'+"Almost never", 
            "2"+'<br/>'+"Sometimes",  
            "3"+'<br/>'+"Often", 
            "4"+'<br/>'+"Always /"+'<br/>'+"Almost always"
          ],required: true
          }
        ],
      }

var closing03b = {
      type: 'survey-likert',
      questions: [
        {
          prompt: '<b>'+"For attention I judged as fake:"+'</b>'+'<br/>'+"It felt like the other agent was moving its attention in the same ways that I would.",
          name: "post-3", 
          labels: [
            "1"+'<br/>'+"Never /"+'<br/>'+"Almost never", 
            "2"+'<br/>'+"Sometimes",  
            "3"+'<br/>'+"Often", 
            "4"+'<br/>'+"Always /"+'<br/>'+"Almost always"
          ],required: true
          }
        ],
      }

var closing04a = {
      type: 'survey-likert',
      questions: [
        {
          prompt: '<b>'+"For attention I judged as human:"+'</b>'+'<br/>'+"It felt as if the attention on the screen was actually my own, not another agent’s.",
          name: "post-4", 
          labels: [
            "1"+'<br/>'+"Never /"+'<br/>'+"Almost never", 
            "2"+'<br/>'+"Sometimes",  
            "3"+'<br/>'+"Often", 
            "4"+'<br/>'+"Always /"+'<br/>'+"Almost always"
          ],required: true
          }
        ],
      }

var closing04b = {
        type: 'survey-likert',
        questions: [
        {
          prompt: '<b>'+"For attention I judged as fake:"+'</b>'+'<br/>'+"It felt as if the attention on the screen was actually my own, not another agent’s.",
          name: "post-4", 
          labels: [
            "1"+'<br/>'+"Never /"+'<br/>'+"Almost never", 
            "2"+'<br/>'+"Sometimes",  
            "3"+'<br/>'+"Often", 
            "4"+'<br/>'+"Always /"+'<br/>'+"Almost always"
          ],required: true
          }
        ],
        }

var closing05a = {
      type: 'survey-likert',
      questions: [
        {
          prompt: '<b>'+"For attention I judged as human:"+'</b>'+'<br/>'+"The attention felt robotic or mechanical.",
          name: "post-5", 
          labels: [
            "1"+'<br/>'+"Never /"+'<br/>'+"Almost never", 
            "2"+'<br/>'+"Sometimes",  
            "3"+'<br/>'+"Often", 
            "4"+'<br/>'+"Always /"+'<br/>'+"Almost always"
          ],required: true
          }
        ],
      }

var closing05b = {
      type: 'survey-likert',
      questions: [
        {
          prompt: '<b>'+"For attention I judged as fake:"+'</b>'+'<br/>'+"The attention felt robotic or mechanical.",
          name: "post-5", 
          labels: [
            "1"+'<br/>'+"Never /"+'<br/>'+"Almost never", 
            "2"+'<br/>'+"Sometimes",  
            "3"+'<br/>'+"Often", 
            "4"+'<br/>'+"Always /"+'<br/>'+"Almost always"
          ],required: true
          }
        ],
      }

var closing1 = {
  type: 'survey-text',
  // preamble: `<img src="img/navarro_burst_03.jpg" style="width:400px;"></img>`,
  questions: [
    {prompt: 'Please briefly describe your experience - specifically, tell us anything you think it would be important for us to know!', rows: 5}
  ]
}

var closing2 = {
  type: 'survey-text',
  // preamble: `<img src="img/navarro_burst_03.jpg" style="width:400px;"></img>`,
  questions: [
    {prompt: 'What did you find easiest about the experiment? Did you use any particular strategies?', rows: 5}
  ]
}


var closing3 = {
  type: 'survey-text',
  // preamble: `<img src="img/navarro_burst_03.jpg" style="width:400px;"></img>`,
  questions: [
    {prompt: 'What did you find most difficult about the experiment?', rows: 5}
  ]
}


var closing4 = {
    type: 'instructions',
    pages: [
    "That's it, you're all done!"+'</br>'+"Thank you for your participation!"
    ],
    trial_duration: 30,
    show_clickable_nav: true,
    button_label_next: "End Experiment"
};

var experimenter_end = {
  type: 'survey-multi-select',
  questions: [
    {
      prompt: '<b>'+"EXPERIMENTER FILL OUT"+'</b>'+'</b>'+'<br/>'+"I have done the following:", 
      options: [, 
      "Printed ID# "+rand_subject_id+" on consent form",
      "Given subject SONA credit or payment", 
      "Given the subject debrief form"], 
      //horizontal: true,
      required: true,
      name: 'Experimenter_end'
    }, 
  ], 
};

timeline.push(closing0)

timeline.push(closing01a)
timeline.push(closing01b)
timeline.push(closing02a)
timeline.push(closing02b)
timeline.push(closing03a)
timeline.push(closing03b)
timeline.push(closing04a)
timeline.push(closing04b)
timeline.push(closing05a)
timeline.push(closing05b)

timeline.push(closing1)
timeline.push(closing2)
timeline.push(closing3)
timeline.push(closing4)
timeline.push(experimenter_end)

// Run the experiment

jsPsych.init({
  timeline: timeline,
  override_safe_mode: false,
  // preload_videos: ["fish.mp4',',',"],
  on_finish: function(){
    jsPsych.data.displayData('json')
    jsPsych.data.get().localSave('csv',rand_subject_id+'_SCRAMBLE_ISOLATED_PILOT.csv');
    jsPsych.data.get().localSave('json',rand_subject_id+'_SCRAMBLE_ISOLATED_PILOT.json');
  }
  })
</script>
</html>